<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Last updated: 2025-08-31">

<title>Logbook - Forward kinematics for Robot Manipulators</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Logbook</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#goals" id="toc-goals" class="nav-link active" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#what-is-kinematics-forward-kinematics" id="toc-what-is-kinematics-forward-kinematics" class="nav-link" data-scroll-target="#what-is-kinematics-forward-kinematics">What is kinematics / forward kinematics ?</a></li>
  <li><a href="#transformation-conventions-for-serial-manipulators" id="toc-transformation-conventions-for-serial-manipulators" class="nav-link" data-scroll-target="#transformation-conventions-for-serial-manipulators">Transformation conventions for serial manipulators</a></li>
  <li><a href="#fk-using-dh-parameters-theoretical" id="toc-fk-using-dh-parameters-theoretical" class="nav-link" data-scroll-target="#fk-using-dh-parameters-theoretical">FK using DH parameters (Theoretical)</a></li>
  <li><a href="#fk-from-urdf-practical" id="toc-fk-from-urdf-practical" class="nav-link" data-scroll-target="#fk-from-urdf-practical">FK from URDF (Practical)</a>
  <ul class="collapse">
  <li><a href="#what-are-the-available-tools-to-obtain-fk-from-urdf" id="toc-what-are-the-available-tools-to-obtain-fk-from-urdf" class="nav-link" data-scroll-target="#what-are-the-available-tools-to-obtain-fk-from-urdf">What are the available tools to obtain FK from URDF ?</a>
  <ul class="collapse">
  <li><a href="#python-libraries" id="toc-python-libraries" class="nav-link" data-scroll-target="#python-libraries">Python Libraries</a></li>
  <li><a href="#c-libraries" id="toc-c-libraries" class="nav-link" data-scroll-target="#c-libraries">C++ Libraries</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#interesting-links-for-later" id="toc-interesting-links-for-later" class="nav-link" data-scroll-target="#interesting-links-for-later"><mark>Interesting links for later</mark>:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Forward kinematics for Robot Manipulators</h1>
</div>

<div>
  <div class="description">
    <strong><em>Last updated</em></strong>: 2025-08-31
  </div>
</div>


<div class="quarto-title-meta column-page-left">

    
  
    
  </div>
  


</header>


<section id="goals" class="level1">
<h1>Goals</h1>
<ul>
<li>What is kinematics / forward kinematics ?</li>
<li>How to derive forward kinematics from URDF of any arbitrary robot ?</li>
<li>What are DH-parameters and why do we use them ?</li>
<li>How to practically do forward kinematics for arbitrary robot kinematic chains</li>
<li>What libraries exist out there ?</li>
</ul>
</section>
<section id="what-is-kinematics-forward-kinematics" class="level1">
<h1>What is kinematics / forward kinematics ?</h1>
<p>Kinematics maps <mark><strong><em>actuator space</em></strong> <span class="math inline">\(\to\)</span> <strong><em>task space</em></strong></mark>; in other words, <em>given actuator inputs, we can determine how the robot responds in its task space</em>.It is important to note that kinematics encompasses not only <strong>position</strong>, but also <strong>velocity</strong>, <strong>acceleration</strong>, <strong>jerk</strong>, and higher-order derivatives. Essentially, any mapping from actuator variables to these quantities in task space falls under kinematics. Lets take a look at few robots, and explore how this looks:</p>
<ul>
<li><strong>Robotic manipulator</strong>
<ul>
<li>Actuators: Joint motors (position / velocity / acceleration)</li>
<li>Task space: End-effector state (position / velocity / acceleration)</li>
</ul></li>
<li><strong>Differential drive robot</strong>
<ul>
<li>Actuators: Wheel motors (velocity)</li>
<li>Task space: Robot body frame (linear and angular velocity)</li>
</ul></li>
<li><strong>Quadrotor</strong>
<ul>
<li>Actuators: Propeller motors (thrust)</li>
<li>Task space: Robot body frame (linear and angular acceleration)</li>
</ul></li>
</ul>
<p><mark>Let’s take 2 link manipulator as a concrete example. Given, joint angles: <span class="math inline">\(\theta_1\)</span>, <span class="math inline">\(\theta_2\)</span>, where’s the end effector (<span class="math inline">\(x\)</span>, <span class="math inline">\(y\)</span>) ?</mark></p>
<p><img src="../images/fk/2_link_manip.png" width="45%"></p>
<p>Joint position <span class="math inline">\(\to\)</span> End effector position <span class="math display">\[\begin{align*}
    x = l_1 \cdot cos(\theta_1) + l_2 \cdot cos(\theta_1 + \theta_2) \\
    y = l_1 \cdot sin(\theta_1) + l_2 \cdot sin(\theta_1 + \theta_2)
\end{align*}\]</span></p>
<p>Joint velocities <span class="math inline">\(\to\)</span> End effector velocity <span class="math display">\[\begin{align*}
    x = -l_1 \cdot sin(\theta_1) \cdot \dot\theta_1 - l_2 \cdot sin(\theta_1 + \theta_2) \cdot (\dot\theta_1 + \dot\theta_2) \\
    y =  l_1 \cdot cos(\theta_1) \cdot \dot\theta_1 + l_2 \cdot cos(\theta_1 + \theta_2) \cdot (\dot\theta_1 + \dot\theta_2)
\end{align*}\]</span></p>
<p><em>aaand</em>, we will skip the accelerations here, since you can probably tell its going to get out of hand pretty quickly.</p>
<p>Regardless, with the above equations in place, one can pretty deterministically calculate the end effector state from the joint angles. This sort of analysis works well with low dof systems, but for more complicated systems, these are not so fun to derive. This is where we turn to transformation matrices, and encode everything in terms of matrix multiplications. This generalizes better.</p>
<p>Before we get further, first lets settle on some conventions that we are going to be using for the remainder of this text.</p>
</section>
<section id="transformation-conventions-for-serial-manipulators" class="level1">
<h1>Transformation conventions for serial manipulators</h1>
<ul>
<li>We have <span class="math inline">\(n\)</span> joints, numbered <span class="math inline">\(1 \to n\)</span></li>
<li>We have <span class="math inline">\(n+1\)</span> links, numbered <span class="math inline">\(0 \to n\)</span>, where link 0 is the base link (or the inertial link)</li>
<li><span class="math inline">\(i\)</span> th joint connects link <span class="math inline">\(i-1\)</span> and <span class="math inline">\(i\)</span> <span class="math inline">\(=&gt;\)</span> <strong>link_<span class="math inline">\(i-1 \to\)</span> <mark>joint_<span class="math inline">\(i \to\)</span></mark> link_<span class="math inline">\(i\)</span></strong></li>
<li>joint_<span class="math inline">\(i\)</span> controls the motion of immediate link_<span class="math inline">\(i\)</span></li>
<li>With the <span class="math inline">\(i\)</span>th joint we associate a joint variable <span class="math inline">\(q_i\)</span>, which resolves to <span class="math inline">\(\theta_i\)</span> for revolute and <span class="math inline">\(d_i\)</span> for prismatic joints respectively</li>
<li>For defining transformating matrices or relative measurments, we will be using this convention:
<ul>
<li><mark><span class="math inline">\(T_j^i\)</span> <span class="math inline">\(\to\)</span> Transformation of <span class="math inline">\(j\)</span> (subscript) when expressed in frame <span class="math inline">\(i\)</span></mark></li>
</ul></li>
</ul>
<p>Given this kinematics chain, if we need to write the transformation matrix <span class="math inline">\((T_j^i)\)</span> from <span class="math inline">\(i \to j\)</span></p>
<p><img src="../images/fk/kinematic_chain_example_1.png" width="45%"></p>
<p><span class="math display">\[\begin{align*}
    T_j^i = A_{i+1} \cdot A_{i+2} ... A_{j-1} \cdot A{j} =  \begin{bmatrix} R_j^i &amp; p_j^i \\ 0 &amp; 1 \end{bmatrix}
\end{align*}\]</span></p>
<p>where, <span class="math inline">\(A_k\)</span> is just the homogenous transformation matrix between links <span class="math inline">\(k-1\)</span> and <span class="math inline">\(k\)</span></p>
<p>and <span class="math inline">\(A_k = A_k(q_k)\)</span> is a function of <span class="math inline">\(k\)</span>th joint variable.</p>
<p>Okay that’s well and good, but how do we obtain these individual <span class="math inline">\(A_k\)</span> ? There are few options here:</p>
<ul>
<li>If the manufacturer provides the DH (Denavit–Hartenberg) parameters, we can directly plug them in to compute the <span class="math inline">\(A_k\)</span> matrices, which depend only on the joint variables. DH parameters systematically encode the robot’s link geometry.</li>
<li>If you are building a robot from scratch, or if DH parameters are not provided, you would need to carefully inspect the robot geometry to determine them.</li>
<li>The third option, which I prefer, is to use the URDF (Unified Robot Description Format). It already encodes the complete robot geometry and is the current standard for computing forward kinematics.</li>
</ul>
</section>
<section id="fk-using-dh-parameters-theoretical" class="level1">
<h1>FK using DH parameters (Theoretical)</h1>
<p>DH (a.k.a Denavit–Hartenberg) parameters is a collection of four parameters:</p>
<p><span class="math display">\[
\begin{array}{|c|c|c|p{6cm}|}
\hline
\text{Parameter} &amp; \text{Type} &amp; \text{Motion} &amp; \text{Meaning} \\
\hline
\theta_i &amp; \text{Joint parameter} &amp; \text{Rotation} &amp; \text{Angle we should rotate } Z_{i-1} \text{ by so that } X_{i-1} \parallel X_i \\
d_i &amp; \text{Joint parameter} &amp; \text{Translation} &amp; \text{Distance along } Z_{i-1} \text{ that would make origin of } i-1 \text{ intersect with } X_i \\
a_i &amp; \text{Link parameter} &amp; \text{Translation} &amp; \text{Distance along } X_i \text{ from } Z_{i-1} \text{ to } Z_i \\
\alpha_i &amp; \text{Link parameter} &amp; \text{Rotation} &amp; \text{Angle to rotate around } X_i \text{ to align } Z_{i-1} \text{ with } Z_i \\
\hline
\end{array}
\]</span></p>
<p>Once we have these four parameters, the rotation matrix <span class="math inline">\(A_i\)</span> (or <span class="math inline">\(A_k\)</span> doesn’t matter) can be computed as follows:</p>
<p><span class="math display">\[
    A_i = Rot_{z,\theta} \cdot Trans_{z, d} \cdot Trans_{x, a} \cdot Rot_{x, \alpha}
\]</span></p>
<p>OR</p>
<p><span class="math display">\[\begin{align*}
A_i =
\begin{bmatrix}
\cos\theta_i &amp; -\sin\theta_i &amp; 0 &amp; 0 \\
\sin\theta_i &amp;  \cos\theta_i &amp; 0 &amp; 0 \\
0            &amp;  0             &amp; 1 &amp; 0 \\
0            &amp;  0             &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 1 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 1 &amp; d_i \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; a_i \\
0 &amp; 1 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 1 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\cdot
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; \cos\alpha_i &amp; -\sin\alpha_i &amp; 0 \\
0 &amp; \sin\alpha_i &amp;  \cos\alpha_i &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\end{align*}\]</span></p>
<p>To delve deeper this video / series is a great refresher: <a href="https://www.youtube.com/watch?v=4WRhVqQaZTE">Robotics 1 U1 (Kinematics) S5 (HTM) P2 (HTM by Denavit Hartenberg)</a></p>
</section>
<section id="fk-from-urdf-practical" class="level1">
<h1>FK from URDF (Practical)</h1>
<p>URDF stands for Universal Robot Description Format, developed by ROS (Robot operating system). Fundamentally its a XML file, with some special tags.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">"1.0"</span><span class="fu">?&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">robot</span><span class="ot"> name=</span><span class="st">"two_link_manipulator"</span>&gt;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- Base link --&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">link</span><span class="ot"> name=</span><span class="st">"base_link"</span>&gt;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">visual</span>&gt;</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">geometry</span>&gt;</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">box</span><span class="ot"> size=</span><span class="st">"0.2 0.2 0.05"</span>/&gt;</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">geometry</span>&gt;</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">origin</span><span class="ot"> xyz=</span><span class="st">"0 0 0"</span><span class="ot"> rpy=</span><span class="st">"0 0 0"</span>/&gt;</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">material</span><span class="ot"> name=</span><span class="st">"gray"</span>/&gt;</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">visual</span>&gt;</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">link</span>&gt;</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- First link --&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">link</span><span class="ot"> name=</span><span class="st">"link1"</span>&gt;</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">visual</span>&gt;</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">geometry</span>&gt;</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">cylinder</span><span class="ot"> length=</span><span class="st">"1.0"</span><span class="ot"> radius=</span><span class="st">"0.05"</span>/&gt;</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">geometry</span>&gt;</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">origin</span><span class="ot"> xyz=</span><span class="st">"0 0 0.5"</span><span class="ot"> rpy=</span><span class="st">"0 0 0"</span>/&gt;</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">material</span><span class="ot"> name=</span><span class="st">"blue"</span>/&gt;</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">visual</span>&gt;</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">link</span>&gt;</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- Second link --&gt;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">link</span><span class="ot"> name=</span><span class="st">"link2"</span>&gt;</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">visual</span>&gt;</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">geometry</span>&gt;</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">cylinder</span><span class="ot"> length=</span><span class="st">"1.0"</span><span class="ot"> radius=</span><span class="st">"0.05"</span>/&gt;</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">geometry</span>&gt;</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">origin</span><span class="ot"> xyz=</span><span class="st">"0 0 0.5"</span><span class="ot"> rpy=</span><span class="st">"0 0 0"</span>/&gt;</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">material</span><span class="ot"> name=</span><span class="st">"green"</span>/&gt;</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">visual</span>&gt;</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">link</span>&gt;</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- Joints --&gt;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">joint</span><span class="ot"> name=</span><span class="st">"joint1"</span><span class="ot"> type=</span><span class="st">"revolute"</span>&gt;</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">parent</span><span class="ot"> link=</span><span class="st">"base_link"</span>/&gt;</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">child</span><span class="ot"> link=</span><span class="st">"link1"</span>/&gt;</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">origin</span><span class="ot"> xyz=</span><span class="st">"0 0 0.025"</span><span class="ot"> rpy=</span><span class="st">"0 0 0"</span>/&gt;</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">axis</span><span class="ot"> xyz=</span><span class="st">"0 0 1"</span>/&gt;</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">limit</span><span class="ot"> lower=</span><span class="st">"-3.1416"</span><span class="ot"> upper=</span><span class="st">"3.1416"</span><span class="ot"> effort=</span><span class="st">"10"</span><span class="ot"> velocity=</span><span class="st">"1"</span>/&gt;</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">joint</span>&gt;</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">joint</span><span class="ot"> name=</span><span class="st">"joint2"</span><span class="ot"> type=</span><span class="st">"revolute"</span>&gt;</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">parent</span><span class="ot"> link=</span><span class="st">"link1"</span>/&gt;</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">child</span><span class="ot"> link=</span><span class="st">"link2"</span>/&gt;</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">origin</span><span class="ot"> xyz=</span><span class="st">"0 0 1.0"</span><span class="ot"> rpy=</span><span class="st">"0 0 0"</span>/&gt;</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">axis</span><span class="ot"> xyz=</span><span class="st">"0 0 1"</span>/&gt;</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">limit</span><span class="ot"> lower=</span><span class="st">"-3.1416"</span><span class="ot"> upper=</span><span class="st">"3.1416"</span><span class="ot"> effort=</span><span class="st">"10"</span><span class="ot"> velocity=</span><span class="st">"1"</span>/&gt;</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">joint</span>&gt;</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">robot</span>&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For a more complete URDF see <a href="../entries/simple_robot.urdf.html">simple_robot.urdf</a>.</p>
<p><img src="../images/urdfs/simple_robot.png" width="45%"></p>
<p>Since creating URDFs is not the focus, we will skip that discussion. The problem we are trying to solve is, given a URDF how to obtain forward kinematics. And since there are plethora of tools that exist out there to help us with this task, we are not going to re-invent the wheel and rather do a bit of research into what exists out here</p>
<section id="what-are-the-available-tools-to-obtain-fk-from-urdf" class="level2">
<h2 class="anchored" data-anchor-id="what-are-the-available-tools-to-obtain-fk-from-urdf">What are the available tools to obtain FK from URDF ?</h2>
<p>Lets see what exists out there and then we start digging in: (Asked Google’s Gemini)</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This list is not exhaustive, but should expose us to a plenty of things that exists out there. and ultimately make our learning experience better.</p>
</div>
</div>
<section id="python-libraries" class="level3">
<h3 class="anchored" data-anchor-id="python-libraries">Python Libraries</h3>
<ol type="1">
<li>pinnochio (Written in C++, has python bindings)</li>
<li>pytorch-kinematics</li>
<li>urdfpy</li>
<li><mark>urdf2casadi</mark> [Winner 🎉]</li>
</ol>
</section>
<section id="c-libraries" class="level3">
<h3 class="anchored" data-anchor-id="c-libraries">C++ Libraries</h3>
<ol type="1">
<li>Kinematics and Dynamics Library (KDL)</li>
<li>MoveIt</li>
<li>pinnochio</li>
</ol>
<p>For details on usability trade‑offs and Python APIs for forward kinematics, see: <a href="../entries/fk_in_python.html">FK in python</a> We will revisit performance trade-offs some other time, and thus also ignoring the C++ libraries</p>
</section>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ul>
<li>Chapter 3: Robotics Modeling and Control by Spong</li>
<li><a href="https://www.youtube.com/watch?v=4WRhVqQaZTE">Robotics 1 U1 (Kinematics) S5 (HTM) P2 (HTM by Denavit Hartenberg)</a></li>
</ul>
</section>
<section id="interesting-links-for-later" class="level1">
<h1><mark>Interesting links for later</mark>:</h1>
<ul>
<li><a href="https://www.youtube.com/watch?v=CwN0I8yUqok">Code Generation from Unified Robot Description Format (URDF) for Accelerated Robotics - Paul Gesel</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>